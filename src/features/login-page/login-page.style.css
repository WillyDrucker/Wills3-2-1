/* ==========================================================================
   LOGIN PAGE - Authentication UI Styling

   Centered login card with email/password authentication and guest mode.
   Designed for mobile-first responsive layout with future OAuth support.

   Architecture:
   - Fullscreen flexbox centered layout
   - Card max-width 400px
   - Email/password inputs with 1.25rem labels
   - Sign Up/Sign In buttons with guest mode option
   - Forgot password link (centered, 16px spacing)
   - Reset password modal overlay

   Spacing System:
   - Title to Email: 32px visual (23px actual + font metrics)
   - Labels to inputs: 7px visual (uses --header-margin-bottom)
   - Email to Password: 16px visual (13px compensates for font metrics)
   - Forgot Password: 16px above/below (13px/12px compensates)
   - OR divider: 16px above/below (13px/12px asymmetric)

   Dependencies:
   - _variables.css: spacing tokens, typography, colors
   - _card-foundations.css: base card structure
   - _action-button-groups.css: button patterns

   Used by: login-page.index.js
   ========================================================================== */

/* === PAGE CONTAINER === */
.login-page {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: var(--app-side-margin); /* Global: 10px - standard app edge margin */
  background: var(--background-dark);
}

/* === LOGIN CARD === */
.login-card {
  width: 100%;
  max-width: 400px;
  margin: 0 auto;
}

/* Override global card padding (11px) for login's larger title font */
.login-page .login-card .card-content-container {
  padding-top: 8px; /* Compensates for 2.5rem title ascender - achieves 16px visual from top */
}

.login-title {
  font-size: var(--font-size-h1); /* Global: 2.5rem (40px) - matches app header */
  font-weight: 700;
  line-height: 1;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  text-align: center;
  margin: 0 0 23px 0; /* Compensates for font metrics - achieves 32px visual */
  color: var(--text-primary);
}

/* === FORM CONTAINER === */
.login-form {
  display: flex;
  flex-direction: column;
  /* No gap - spacing controlled per element for precision */
}

/* === INPUT GROUPS === */
.login-input-group {
  display: flex;
  flex-direction: column;
  margin-bottom: 0;
}

/* First input group (Email) */
.login-input-group:first-of-type {
  margin-bottom: 13px; /* Compensates for font metrics - achieves 16px visual to Password */
}

/* Second input group (Password) - no extra margin-top, relies on Email's margin-bottom */
.login-input-group:last-of-type {
  margin-bottom: 0;
}

.forgot-password-link {
  align-self: center; /* Center alignment */
  font-size: 1rem;
  font-weight: 600;
  color: var(--primary-blue);
  text-decoration: none;
  margin: 13px 0 12px 0; /* Compensates for font metrics - achieves 16px visual both sides */
  display: block;
}

.login-label {
  font-size: var(--font-size-h2); /* 1.25rem - matches config card headers */
  font-weight: 600;
  line-height: 1;
  color: var(--text-primary);
  margin: 0 0 var(--header-margin-bottom) 0; /* 4px + descender = 7px visual */
}

.login-input {
  width: 100%;
  min-height: var(--control-height); /* Global: 50px - matches selector height */
  padding: 10px 16px; /* Matches selector padding */
  font-size: 16px !important;
  font-family: 'Roboto', sans-serif !important;
  color: #FFFFFF !important;
  -webkit-text-fill-color: #FFFFFF !important;
  background: rgba(255, 255, 255, 0.1) !important;
  box-shadow: inset 0 0 0 2px var(--primary-blue) !important; /* Global: #0099ff */
  border: none !important;
  border-radius: var(--border-radius); /* Global: 8px */
  will-change: font-size, font-family;
}

/* Focus state - black background on focus */
.login-input:focus {
  outline: none !important;
  color: #FFFFFF !important;
  background: var(--background-dark) !important; /* Global: #000000 */
  box-shadow: inset 0 0 0 2px var(--primary-blue) !important; /* Global: #0099ff */
}
/* Keyframe animation to force Chrome to respect our font styles */
@keyframes autofill-fix {
  0% {
    font-size: 16px;
    font-family: 'Roboto', sans-serif;
  }
  100% {
    font-size: 16px;
    font-family: 'Roboto', sans-serif;
  }
}


/* === CHROME AUTOFILL OVERRIDES === */
/* All !important flags REQUIRED to override Chrome's aggressive autofill styling */
.login-input:-webkit-autofill,
.login-input:-webkit-autofill:hover,
.login-input:-webkit-autofill:focus,
.login-input:-webkit-autofill:active,
.login-input:-webkit-autofill:not(:focus) {
  -webkit-text-fill-color: #FFFFFF !important;
  -webkit-box-shadow: inset 0 0 0 2px var(--primary-blue), 0 0 0 1000px rgba(255, 255, 255, 0.1) inset !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
  background-image: none !important;
  color: #FFFFFF !important;
  font-size: 16px !important;
  font-family: 'Roboto', sans-serif !important;
  will-change: font-size, font-family !important;
  transition: background-color 5000000s ease-in-out 0s, font-size 5000000s ease-in-out 0s !important;
  animation: autofill-fix 0s forwards !important;
}

/* Autofill focus state - black background */
.login-input:focus:-webkit-autofill {
  -webkit-box-shadow: inset 0 0 0 2px var(--primary-blue), 0 0 0 1000px var(--background-dark) inset !important;
  background-color: var(--background-dark) !important;
  font-size: 16px !important;
  font-family: 'Roboto', sans-serif !important;
  will-change: font-size, font-family !important;
  transition: background-color 5000000s ease-in-out 0s, font-size 5000000s ease-in-out 0s !important;
}

/* Chrome internal autofill selected state */
.login-input:-webkit-autofill-selected,
.login-input:-internal-autofill-selected {
  appearance: none !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
  background-image: none !important;
  color: #FFFFFF !important;
  -webkit-text-fill-color: #FFFFFF !important;
  font-size: 16px !important;
  font-family: 'Roboto', sans-serif !important;
  will-change: font-size, font-family !important;
  -webkit-box-shadow: inset 0 0 0 2px var(--primary-blue), 0 0 0 1000px rgba(255, 255, 255, 0.1) inset !important;
  box-shadow: inset 0 0 0 2px var(--primary-blue), 0 0 0 1000px rgba(255, 255, 255, 0.1) inset !important;
  transition: background-color 5000000s ease-in-out 0s, font-size 5000000s ease-in-out 0s !important;
}

/* Standard :autofill pseudo-class (newer browsers) */
.login-input:autofill,
.login-input:autofill:hover,
.login-input:autofill:focus {
  -webkit-text-fill-color: #FFFFFF !important;
  box-shadow: inset 0 0 0 2px var(--primary-blue), 0 0 0 1000px rgba(255, 255, 255, 0.1) inset !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
  font-size: 16px !important;
  font-family: 'Roboto', sans-serif !important;
  will-change: font-size, font-family !important;
}

.login-input:autofill:focus {
  box-shadow: inset 0 0 0 2px var(--primary-blue), 0 0 0 1000px var(--background-dark) inset !important;
  background-color: var(--background-dark) !important;
}

/* Override Chrome's autofill dropdown hover font change (::first-line fix) */
.login-input:-webkit-autofill::first-line {
  font-family: 'Roboto', sans-serif !important;
  font-size: 16px !important;
  font-weight: 400 !important;
  color: #FFFFFF !important;
}


.login-input::placeholder {
  color: var(--text-tertiary);
}

/* === ERROR/SUCCESS MESSAGES === */
.login-error {
  padding: var(--space-s); /* Global: 12px */
  font-size: 0.875rem;
  border-radius: 4px; /* Smaller radius than controls (8px) for subtle messaging */
  text-align: center;
  background: rgba(255, 82, 82, 0.1);
  border: 1px solid var(--text-skip);
  color: var(--text-skip);
  margin-bottom: var(--space-m); /* 16px spacing to next element */
}

.login-error.is-hidden {
  display: none;
}

.login-error.login-success {
  background: rgba(39, 174, 96, 0.1);
  border-color: var(--log-green);
  color: var(--log-green);
}

/* === BUTTON GROUPS === */
.login-button-group {
  display: flex;
  gap: var(--space-m); /* Global: 16px between buttons */
}

.login-button-group .action-button {
  flex: 1; /* Equal width buttons */
}

/* Secondary button style (Sign Up) - Blue */
.button-secondary {
  background-color: var(--primary-blue);
  color: var(--text-on-action-color);
}

/* === GUEST BUTTON === */
.button-guest {
  width: 100%;
  background: transparent;
  color: var(--text-secondary);
  border: 2px solid var(--primary-blue-dark);
}

/* Yellow highlight for "Guest" text - overrides inherited button color */
.login-page .button-guest .guest-highlight {
  color: var(--text-yellow-maintenance); /* Matches side nav maintenance yellow */
}

/* === DIVIDER === */
/* "OR" divider between Sign In/Sign Up and Guest Mode - centered text over horizontal line */
.login-divider {
  position: relative;
  text-align: center;
  margin: 0;
  padding: 13px 0 12px 0; /* Asymmetric padding compensates for font metrics - achieves 16px visual */
}

/* Horizontal line behind "OR" text */
.login-divider::before {
  content: '';
  position: absolute;
  top: 50%; /* Center line vertically */
  left: 0;
  right: 0;
  height: 1px;
  background: var(--primary-blue-dark);
}

/* "OR" text - positioned above line with card background to create break */
.login-divider-text {
  position: relative; /* Above ::before line (z-index stacking) */
  display: inline-block;
  padding: 0 var(--space-s); /* 12px horizontal breathing room around "OR" */
  background: var(--background-card); /* Covers line behind text */
  color: var(--text-primary);
  font-size: 1rem; /* Matches label size for consistency */
  font-weight: 600; /* Matches label weight for consistency */
  line-height: 1; /* Tight line height prevents extra vertical space */
}

/* === RESET PASSWORD LINK MODAL === */
/* Fullscreen overlay for "Forgot Password?" flow - sends reset link via email */
.reset-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8); /* Dark overlay to focus attention */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000; /* Above all page content */
  padding: var(--app-side-margin); /* Global: 10px - standard app edge margin */
}

.reset-modal.is-hidden {
  display: none;
}

.reset-modal-content {
  width: 100%;
  max-width: 400px;
  padding: var(--card-padding-top) var(--card-padding-sides) var(--card-padding-sides) var(--card-padding-sides); /* 11px top, 14px sides (14px + 2px border = 16px visual) */
}

.reset-modal-title {
  font-size: var(--font-size-h1); /* Global: 2.5rem - "Reset Password Link" title */
  font-weight: 700;
  line-height: 1;
  text-shadow: var(--text-shadow-subtle); /* Global: 0 2px 4px rgba(0, 0, 0, 0.8) */
  text-align: center;
  color: var(--text-primary);
  margin: -3px 0 6px 0; /* Negative top margin compensates for card padding + font ascender = 16px visual from top */
}

.reset-modal-description {
  font-size: 1rem;
  text-align: center;
  color: var(--text-secondary);
  margin: 0 0 7px 0; /* Compensates for line-height - achieves 16px visual to Email label */
  line-height: 1.4;
}

.reset-input-group {
  display: flex;
  flex-direction: column;
  gap: 4px; /* With label descender = 7px visual */
  margin-bottom: var(--space-m);
}

.reset-label {
  font-size: var(--font-size-h2); /* 1.25rem - matches login page Email/Password labels */
  font-weight: 600;
  line-height: 1;
  color: var(--text-primary);
  margin: 0; /* Gap handles spacing */
}

.reset-button-group {
  display: flex;
  gap: var(--space-m);
}

.reset-button-group .action-button {
  flex: 1;
}

/* === ERROR FLASH ANIMATION === */
/* Applied on validation failure - 3 pulses for visual feedback */
.login-button-group .action-button.button-is-flashing,
.reset-button-group .action-button.button-is-flashing {
  animation: button-red-pulse 560ms linear 3; /* 560ms × 3 = 1680ms total */
}

/* Pulse between error red and card background with 50% opacity at peak */
@keyframes button-red-pulse {
  0%,
  100% {
    background-color: var(--surface-dark); /* Global: #1e1e1e - card background */
  }
  50% {
    background-color: var(--skip-red); /* Global: #b30000 - error red */
    opacity: 0.5; /* Fade to 50% at peak for smooth pulse effect */
  }
}

/* === FOOTER === */
.login-footer {
  margin-top: var(--space-l); /* Global: 24px top */
  max-width: 400px;
  text-align: center;
}

.login-footer-text {
  font-size: 0.875rem;
  color: var(--text-tertiary);
  margin: 0;
}

/* === RESPONSIVE === */
/* Allow button text to wrap within buttons at narrow viewports when text doesn't fit */
@media (max-width: 360px) {
  .reset-button-group .action-button,
  .login-button-group .action-button {
    white-space: normal; /* Allow text to wrap */
    line-height: 1.2; /* Tighter line height for multi-line text */
  }
}
