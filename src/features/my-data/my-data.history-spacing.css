/* ==========================================================================
   MY DATA - History Card Spacing

   Manages precise spacing throughout the history calendar view using a nuclear
   reset pattern. All elements reset to margin: 0, padding: 0, then selectively
   restored with !important flags to override the reset.

   Architecture: Calendar view with workout history
   - History title: 16px from card top, 7px to selector (managed in my-data.header.css)
   - Week navigator: 16px from selector, 16px to calendar (managed in my-data.header.css)
   - Day headers: 7px spacing to exercises
   - Exercise blocks: 16px spacing between
   - Set rows: 7px spacing between
   - Dividers: 16px visual spacing

   ðŸ”’ CEMENT: Nuclear reset pattern with !important overrides
   - All elements reset to 0 (margin, padding, line-height)
   - Header elements (title, navigator) use !important to override nuclear reset
   - Fine-tuned spacing accounts for font metrics and anti-aliasing:
     * History title: 4px margin-bottom = 7px visual to selector
     * Week navigator: 15px margin-bottom = 16px visual to calendar content
     * Day headers: 3px margin = 7px visual with line-height
     * Exercise blocks: 12px margin = 16px visual with 4px line-height

   Dependencies:
   Global: _variables.css (--header-margin-bottom, --history-exercise-spacing,
           --space-m, --space-s, --history-day-header-spacing)
   Parent: my-data.style.css
   Sibling: my-data.header.css (History title and week navigator styling)

   Used by: History calendar view (my-data.template.js)
   ========================================================================== */

/* === HISTORY CARD CASCADE MANAGEMENT === */
/* ðŸ”’ CEMENT: Nuclear reset enables precise spacing control */
.history-card * {
  margin: 0;
  padding: 0;
  line-height: 1;
}

/* === SELECTIVE SPACING RESTORATION === */
/* ðŸ”’ CEMENT: All measurements verified for visual consistency */

/* History title */
.history-card .history-week-title {
  /* Spacing handled in my-data.header.css */
  /* 16px from card top: 11px card-padding + 1px padding-top + font metrics */
  /* 7px to selector: 4px margin-bottom */
  padding-top: 1px !important; /* Override nuclear reset */
  margin-bottom: 4px !important; /* Override nuclear reset - 4px = 7px visual to selector */
}

/* Week navigator */
.history-card .week-navigator {
  /* Spacing handled in my-data.header.css - must override nuclear reset */
  margin-top: var(--space-m) !important; /* 16px from selector */
  margin-bottom: 15px !important; /* 15px = 16px visual to calendar content */
}

/* Day headers - first exercise should be 7px below */
.history-card .history-day-header {
  margin-bottom: var(--history-exercise-spacing); /* 3px + line-height = 7px visual */
}

/* When day header is followed by placeholder instead of exercises */
.history-card .history-day-header:has(+ .history-placeholder-text) {
  margin-bottom: calc(var(--space-m) - 4px); /* 12px = 16px visual to placeholder */
}

/* Placeholder text */
.history-card .history-placeholder-text,
.history-card .day-card-placeholder-text {
  margin: 0;
  margin-bottom: calc(var(--space-m) - 1px); /* 15px + italic = 16px visual to divider */
  padding: 0; /* Overrides global 40px padding */
}

/* Last day placeholder (Sunday) - no divider after, so space to card bottom */
.history-card .history-day-section:last-child .history-placeholder-text {
  margin-bottom: 0; /* Card padding handles spacing to bottom */
}

/* === DIVIDERS === */
.history-card .history-day-divider {
  margin-bottom: var(--history-day-header-spacing); /* 17px = 16px visual to next day */
}

.history-card .history-session-divider {
  margin: 13px 0 15px 0; /* 16px visual both sides */
}

/* === EXERCISE BLOCKS === */
/* ðŸ”’ CEMENT: 16px between exercises */
.history-card .history-exercise-block {
  margin: 0 0 calc(var(--space-m) - 4px) 0; /* 12px + 4px line = 16px visual between */
}

/* Last exercise before divider */
.history-card .history-exercise-block:last-child {
  margin-bottom: var(--space-m); /* 16px to divider */
}

/* Adjust when followed by session divider */
.history-card .history-exercise-list:has(+ .history-session-divider) .history-exercise-block:last-child {
  margin-bottom: 13px; /* Compensate for session divider margins */
}

/* === EXERCISE NAMES === */
/* ðŸ”’ CEMENT: 7px to first set row */
.history-card .history-exercise-name {
  margin: 0 0 calc(var(--space-s) - 4px) 0; /* 3px + 4px line = 7px visual */
}

/* === SET ROWS === */
/* ðŸ”’ CEMENT: 7px between rows */
.history-card .history-set-row {
  margin: 0 0 calc(var(--space-s) - 4px) 0; /* 3px + 4px line = 7px visual */
}

.history-card .history-set-row:last-child {
  margin-bottom: 0; /* No margin on last row */
}

/* Set row horizontal alignment - preserve from reset */
.history-card .history-set-left {
  margin-left: 100px; /* Indent for set numbers */
}

.history-card .history-set-right {
  margin-left: auto; /* Push results to right */
}

/* === SELECTOR === */
/* Selector container */
.history-selector-container {
  margin-bottom: 0; /* Week navigator now handles spacing below with its margin-top */
}
