/* ==========================================================================
   WORKOUT LOG STYLES - TOKENIZED SYSTEM
   
   CEMENT: Core spacing achieved through global tokens
   - Universal card padding pattern for 16px visual margins
   - Standard header spacing for 7px visual gap
   - Log items maintain 50px height with balanced content
   - Edit panel: 7px labels to inputs, 16px between inputs, 16px to buttons
   - 16px direct spacing from last log to Full Screen button (no divider)
   
   DO NOT modify without measuring visual output
   ========================================================================== */

/* === CARD FOUNDATION === */

/* CEMENT: Border-compensated padding achieves exact 16px visual from top */
#workout-log-card > .card-content-container {
  padding: calc(var(--card-padding-top) + 3px) var(--card-padding-sides) var(--card-padding-sides) var(--card-padding-sides);
  box-sizing: border-box;
}

/* === HEADER SECTION === */

/* Header typography - collapsed line-height for precise spacing control */
#workout-log-card .card-header {
  font-size: var(--font-size-h2);
  font-weight: 600;
  line-height: 0.7;  /* Collapsed to control exact visual spacing */
  color: var(--on-surface-light);
  margin: 0;
  padding: 0;
}

/* CEMENT: 7px visual gap from header to content */
#workout-log-card .card-header + #workout-content {
  margin-top: var(--space-s);
}

/* === WORKOUT CONTENT CONTAINER === */

#workout-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-xxs); /* 4px between log items for tight stacking */
}

/* === LOG ITEM STRUCTURE === */

.workout-log-item-container {
  position: relative; /* Anchors the edit panel overlay */
  scroll-margin-top: var(--space-m);
}

.workout-log-item-container.is-next-up-clickable {
  cursor: pointer;
}

/* Remove default details/summary styling */
.workout-log-item-container summary {
  display: block;
  cursor: pointer;
  list-style: none;
}

.workout-log-item-container summary::-webkit-details-marker {
  display: none;
}

/* === LOG ITEM VISUAL CARD === */

.workout-log-item {
  background-color: var(--background-dark);
  border: var(--card-border-width) solid transparent;
  border-radius: var(--border-radius);
  min-height: var(--control-height); /* 50px standard height */
  padding: 0 12px; /* Horizontal padding only */
  display: flex;
  flex-direction: column;
  justify-content: space-evenly; /* Balanced vertical distribution */
  gap: 0; /* Let space-evenly handle all spacing */
}

/* Square off bottom corners when edit panel is open */
.workout-log-item-container[open] > summary > .workout-log-item {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  border-color: var(--primary-blue);
  padding: 0 12px; /* Maintain consistent padding */
}

/* === LOG ITEM CONTENT LAYOUT === */

.log-item-line-1,
.log-item-line-2 {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-s);
  min-width: 0;
  line-height: 1; /* Prevent extra line spacing */
}

/* Fine-tune vertical position for exact 7px from top edge */
.log-item-line-1 {
  margin-top: 1px; /* Micro-adjustment for visual balance */
}

/* === LOG ITEM TYPOGRAPHY === */

.log-item-exercise-name {
  font-size: var(--font-size-body-m);
  font-weight: 600;
  flex-grow: 1;
  flex-shrink: 1;
  min-width: 40px;
}

.log-item-timestamp {
  font-size: var(--font-size-body-m);
  font-weight: 600;
  flex-shrink: 0;
}

.log-item-details-left {
  flex-shrink: 1;
  min-width: 0;
}

.log-item-details-content {
  color: var(--on-surface-medium);
}

.log-item-separator {
  color: var(--on-surface-medium);
  font-weight: 600;
}

.log-item-results-container {
  display: flex;
  align-items: baseline;
  white-space: nowrap;
  flex-shrink: 0;
}

/* Unified text sizing and colors */
.log-item-exercise-name,
.log-item-results-value,
.log-item-set-info-value,
.log-item-superset-part,
.log-item-results-unit,
.log-item-set-info-label {
  font-size: var(--font-size-body-m);
  font-weight: 600;
}

.log-item-results-value,
.log-item-set-info-value,
.log-item-details-content .data-highlight {
  color: var(--on-surface-light);
}

.log-item-superset-part.text-primary {
  color: var(--primary-blue);
}

.log-item-results-unit,
.log-item-set-info-label {
  color: var(--on-surface-medium);
}

.log-item-skipped-text {
  font-size: var(--font-size-body-m);
  font-weight: 600;
  color: var(--text-orange-deviation);
}

/* === LOG ITEM STATES === */

.workout-log-item.log-completed {
  border-color: var(--primary-blue);
}

body.start-glow-animations .workout-log-item.is-next-up {
  animation: glow-border 4s ease-in-out infinite;
}

.workout-log-item.log-skipped {
  border-color: var(--warning-orange);
}

/* Maintain orange border when skipped item is open */
.workout-log-item-container.is-skipped-item[open] > summary > .workout-log-item,
.workout-log-item-container.is-skipped-item .edit-log-controls {
  border-color: var(--warning-orange);
}

.workout-log-item.is-updating-log .log-item-results-container {
  animation: laser-etch-update 1.7s ease-out;
}

/* === MUTED STATE (when other selectors open) === */

/* CEMENT: Preserves rounded shape while muting - prevents square overlay */
body.is-selector-open
  .workout-log-item-container:not([open])
  > summary
  > .workout-log-item {
  border-color: var(--primary-blue-dark) !important;
  box-shadow: none !important; /* Block generic box-shadow */
  background-color: var(--background-dark) !important; /* Maintain background */
  border-radius: var(--border-radius) !important; /* Preserve rounded corners */
}

/* Prevent generic selector muting from applying square overlay */
body.is-selector-open
  .workout-log-item-container:not([open])
  > summary {
  box-shadow: none !important; /* Block the square inset shadow */
  background-color: transparent !important; /* Keep transparent background */
}

/* === EDIT LOG CONTROLS PANEL === */

.edit-log-controls {
  background: var(--background-dark);
  border: var(--card-border-width) solid var(--primary-blue);
  border-top: none;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  border-bottom-left-radius: var(--border-radius);
  border-bottom-right-radius: var(--border-radius);
  padding: 12px; /* Consistent 12px internal padding */
  display: flex;
  flex-direction: column;
  position: absolute;
  width: 100%;
  z-index: 100;
}

/* CEMENT: 7px visual from labels to inputs via font compensation */
.edit-log-controls .input-labels-container {
  margin-top: 0;
  margin-bottom: var(--space-xxs); /* 4px + line-height = 7px visual */
}

.edit-log-controls .input-label {
  font-size: var(--font-size-body-m);
  font-weight: 600;
  line-height: 0.9;
}

/* CEMENT: 16px between inputs, 16px to buttons */
.edit-log-controls .input-controls-grid {
  margin-top: 0;
  margin-bottom: var(--space-m); /* 16px to buttons */
  gap: var(--space-m); /* 16px between weight/reps inputs */
  display: flex;
}

.edit-log-controls .number-input-container {
  height: 40px; /* Compact height for edit mode */
}

/* CEMENT: 16px gaps between all three buttons via grid */
.edit-log-buttons {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr; /* Equal width columns */
  gap: var(--space-m); /* 16px between all buttons */
}

.edit-log-buttons .action-button {
  height: 32px; /* Compact button height */
  font-size: var(--font-size-body-m);
  width: 100%; /* Fill grid column */
}

/* === CARD FOOTER === */

/* CEMENT: Direct 16px spacing from last log - no divider */
.card-footer-action {
  margin-top: var(--space-m); /* 16px from last log item */
  padding: 0; /* No padding */
  border: none; /* No divider */
}