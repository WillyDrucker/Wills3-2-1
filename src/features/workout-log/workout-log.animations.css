/* ==========================================================================
   WORKOUT LOG - Animations

   Grow/snap and green flash animations for log updates. Separate animations
   for value (white) and unit (gray) text.

   ðŸ”’ CEMENT: Perfect timing and color transitions for log updates
   - Grow/snap: 900ms grow to 1.15x, 100ms snap back (1000ms total, optimal feel)
   - Color flash: 1800ms total animation (hold color 1000ms during stamp, then flash green 800ms)
   - No blackout: Uses explicit color tokens to prevent rendering artifacts

   Dependencies:
   Global: _variables.css (--log-green, --on-surface-light, --on-surface-medium)
   Parent: workout-log.style.css

   Used by: workout-log.index.js via .is-updating-log class
   ========================================================================== */

/* === KEYFRAME DEFINITIONS === */

/* ðŸ”’ CEMENT: Container grow and snap animation - 900ms/100ms timing */
@keyframes workout-log-stamp {
  0% {
    transform: scale(1);
  }
  90% {  /* ðŸ”’ CEMENT: 900ms grow phase (1000ms total: 900ms grow + 100ms snap) */
    transform: scale(1.15);
  }
  100% { /* ðŸ”’ CEMENT: 100ms snap back for crisp finish */
    transform: scale(1);
  }
}

/* ðŸ”’ CEMENT: Color flash animation - value text stays white during stamp, then flashes green */
@keyframes workout-log-value-flash {
  0% { color: var(--on-surface-light); }    /* White during stamp */
  55% { color: var(--on-surface-light); }   /* Hold white (1s stamp = 55% of 1.8s total) */
  77.5% { color: var(--text-green-plan); }  /* Peak green (halfway through flash) */
  100% { color: var(--on-surface-light); }  /* Return to white */
}

/* ðŸ”’ CEMENT: Color flash animation - unit text stays gray during stamp, then flashes green */
@keyframes workout-log-unit-flash {
  0% { color: var(--on-surface-medium); }   /* Gray during stamp */
  55% { color: var(--on-surface-medium); }  /* Hold gray (1s stamp = 55% of 1.8s total) */
  77.5% { color: var(--text-green-plan); }  /* Peak green (halfway through flash) */
  100% { color: var(--on-surface-medium); } /* Return to gray */
}

/* === ANIMATION APPLICATION === */

/* Container scaling animation */
.workout-log-item.is-updating-log {
  animation: workout-log-stamp 1000ms ease-out;
  transform-origin: center center;
}

/* Value text color animation - unified timeline with stamp */
.workout-log-item.is-updating-log .log-item-results-value {
  animation: workout-log-value-flash 1800ms ease-out; /* CEMENT: 1800ms total (holds white 1000ms, flashes 800ms) */
  backface-visibility: hidden; /* Rendering stability */
  -webkit-font-smoothing: antialiased;
}

/* Unit text color animation - unified timeline with stamp */
.workout-log-item.is-updating-log .log-item-results-unit {
  animation: workout-log-unit-flash 1800ms ease-out; /* CEMENT: 1800ms total (holds gray 1000ms, flashes 800ms) */
  backface-visibility: hidden; /* Rendering stability */
  -webkit-font-smoothing: antialiased;
}

/* === TIMESTAMP SKIP ANIMATION === */

/* ðŸ”’ CEMENT: Timestamp fade to red when rest is skipped */
@keyframes timestamp-fade-to-skip {
  0% {
    color: inherit; /* Start with default color */
  }
  100% {
    color: var(--text-red-skip); /* Fade to red */
  }
}

/* Apply fade animation to timestamp when rest is skipped */
.workout-log-item.is-skip-animating .log-item-timestamp.text-skip {
  animation: timestamp-fade-to-skip 500ms ease-out forwards;
}

