/* ==========================================================================
   CONFIG HEADER - Streamlined configuration selector

   CEMENT: Minimal spacing with single selector control
   Purpose: Compact header for accessing full config modal
   Dependencies: Global card foundations, selectors, headers
   Used by: Workout page main layout
   ========================================================================== */

/* Global dependencies */
@import url("../../styles/components/_card-headers.css");
@import url("../../styles/components/_card-foundations.css");
@import url("../../styles/components/_selectors.css");

/* === CARD FOUNDATION === */
#config-header {
  margin: 0 0 var(--space-m) 0; /* 16px bottom visual */
  border: var(--card-border-width) solid var(--primary-blue); /* Always blue border */
  transition: border-radius 0.3s ease;
  position: relative;
  z-index: 100; /* Above other cards when expanded */
  box-shadow: none; /* Remove any inherited shadow */
}

/* Blue border when expanded - square bottom corners to connect with dropdown */
#config-header:has(.config-header-group.expanded) {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  margin-bottom: calc(var(--space-m) - 2px); /* Compensate for 2px bottom border visual shift */
}

/* Standard card padding from global */
#config-header .card-content-container {
  padding: 13px var(--card-padding-sides) var(--card-padding-sides) var(--card-padding-sides); /* 13px + 2px border + 1px adjustment = 16px visual top */
  box-sizing: border-box;
  transition: padding 0.3s ease;
}

/* Collapsed state - reduce padding */
#config-header .config-header-group.collapsed ~ * {
  overflow: hidden;
}

#config-header:has(.config-header-group.collapsed) .card-content-container {
  padding-bottom: 12px; /* Slightly less padding when collapsed */
}

/* Expanded content - absolute positioning to overlay below */
.config-header-expanded-content {
  position: absolute;
  top: 100%; /* Start right at card bottom edge */
  left: calc(-1 * var(--card-border-width)); /* Align with outer card edge */
  right: calc(-1 * var(--card-border-width)); /* Align with outer card edge */
  background: var(--surface-dark); /* Match card background color */
  border: var(--card-border-width) solid var(--primary-blue);
  border-top: none; /* Connect to card above */
  border-radius: 0 0 var(--border-radius) var(--border-radius);
  padding: 0 var(--card-padding-sides) 16px var(--card-padding-sides); /* 16px bottom accounting for 2px border */
  box-shadow: none; /* Remove shadow to match card */
  z-index: 100;
}

/* Action buttons at bottom of expanded content */
.config-header-actions {
  display: flex;
  gap: 16px; /* 16px space between buttons */
  margin-top: 16px;
  margin-bottom: 0;
}

.config-action-button {
  flex: 1;
  height: 50px;
  font-size: var(--font-size-h2);
  font-weight: 600;
  border: none;
  border-radius: var(--border-radius);
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.config-action-button.cancel-button {
  background: var(--background-dark);
  color: var(--on-surface-light);
  box-shadow: inset 0 0 0 2px var(--on-surface-disabled),
              0 2px 6px rgba(0, 0, 0, 0.3);
}

.config-action-button.reset-button {
  background: var(--background-dark);
  color: var(--text-red-skip);
  box-shadow: inset 0 0 0 2px var(--text-red-skip),
              0 2px 6px rgba(0, 0, 0, 0.3);
}

/* === HEADER === */
/* Header line container with clock */
#config-header .card-header-line {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: var(--header-margin-bottom); /* 7px visual */
  position: relative;
}

#config-header .card-header {
  font-size: var(--font-size-h2); /* 1.25rem */
  font-weight: 600;
  line-height: 1;
  color: var(--on-surface-light);
  margin: 0;
  padding: 0;
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.9);
}

#config-header .card-header-clock {
  font-size: var(--font-size-h2); /* 1.25rem */
  font-weight: 600;
  line-height: 1;
  color: var(--on-surface-light);
  white-space: nowrap;
  flex-shrink: 0;
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.9);
}


/* === CONFIG GROUP === */
#config-header .config-header-group {
  margin: 0;
  padding: 0;
}

/* === EXPANDED PLAN ROW === */
/* When expanded, Current Plan selector + collapse button in horizontal layout */
.expanded-plan-row {
  display: flex;
  align-items: stretch;
  gap: 0;
  margin-top: 7px; /* 7px from "Current Plan" header */
}

.expanded-plan-row .icon-bar-expand {
  flex-shrink: 0;
  align-self: stretch;
}

/* === SELECTOR STYLES === */
/* Standard 50px selector with normalized selection */
#config-header .app-selector summary {
  /* Hard constraint: 50px height */
  min-height: 50px;
  max-height: 50px;
  height: 50px;
  /* Normalize selection outline */
  outline: none;
  user-select: none;
  -webkit-user-select: none;
}

/* Remove bottom border line from open selectors in config-header */
#config-header .app-selector[open] > summary {
  box-shadow: inset 0 0 0 2px var(--primary-blue);
  border-bottom-left-radius: var(--border-radius);
  border-bottom-right-radius: var(--border-radius);
}

/* === CURRENT SESSION DISPLAY === */
/* Session selector with chevron navigation */
.current-session-display {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 16px; /* 16px below Current Setup selector */
  margin-bottom: 2px; /* 2px + 14px card padding = 16px visual from card bottom */
  font-size: var(--font-size-h2);
  font-weight: 600;
  min-height: 32px; /* Match button height */
}

/* 50x32 buttons with input selector styling */
.session-chevron {
  position: absolute;
  width: 50px;
  height: 32px;
  min-width: 50px;
  min-height: 32px;
  padding: 0;
  margin: 0;
  background: var(--background-dark); /* Black background like selectors */
  box-shadow: inset 0 0 0 1px var(--on-surface-disabled),
              0 2px 6px rgba(0, 0, 0, 0.3); /* 1px gray border + drop shadow */
  border: none;
  border-radius: var(--border-radius);
  color: #ffffff; /* White chevrons */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.session-chevron-left {
  left: 0; /* 16px from card border (handled by card padding) */
}

.session-chevron-right {
  right: 0; /* 16px from card border (handled by card padding) */
}

/* Disabled state - informational gray */
.session-chevron:disabled,
.session-chevron.is-disabled {
  box-shadow: inset 0 0 0 1px var(--on-surface-disabled),
              0 2px 6px rgba(0, 0, 0, 0.3); /* 1px gray border when disabled */
  color: var(--on-surface-medium); /* Informational gray chevron */
  cursor: default;
  opacity: 0.5;
}

.current-session-text {
  display: flex;
  align-items: baseline;
  justify-content: center;
  font-size: var(--font-size-h2);
  font-weight: 600;
  line-height: 1;
  white-space: nowrap;
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.9);
}

.current-session-text .session-label {
  color: var(--on-surface-medium); /* Informational gray */
  font-weight: 500; /* Lighter weight for label */
}

.current-session-text .session-value {
  font-weight: 600;
}

/* === MULTI-LINE SELECTORS === */
/* Two-line content with centered text - compressed to fit 50px */
#config-header .selector-content.multi-line {
  display: block;
  text-align: center;
  padding: 5px 0 5px 0; /* Minimal padding: 5px top + 5px bottom = 10px */
  line-height: 1; /* Tight line-height */
}

#config-header .selector-content.multi-line.balanced-text > span {
  display: block;
  margin: 0;
  padding: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1; /* Tight line-height = 20px per line */
}

#config-header .selector-content.multi-line.balanced-text > span:first-child {
  margin-bottom: 0px; /* No gap - relies on line spacing */
}

#config-header .selector-content.multi-line.balanced-text > span > span {
  display: inline;
}

/* === ICON BAR (COLLAPSED STATE) === */
.icon-bar {
  display: flex;
  align-items: center;
  gap: 7px; /* 7px between all items */
  margin-top: 0;
  padding: 0;
  font-size: 1rem;
  min-height: 50px;
}

/* Plan button - flexible width spanning left space */
.icon-bar-item.icon-plan-wide {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 8px;
  flex: 1; /* Span available space */
  height: 50px;
  min-height: 50px;
  background: var(--background-dark);
  border: none;
  border-radius: var(--border-radius);
  box-shadow: inset 0 0 0 2px var(--primary-blue), /* Blue border */
              0 2px 6px rgba(0, 0, 0, 0.3); /* Dropdown shadow */
  cursor: pointer;
}

.icon-bar-item.icon-plan-wide .plan-text {
  font-size: var(--font-size-h2); /* 1.25rem - matches Current Plan selector */
  font-weight: 600; /* Matches app-selector base weight */
  line-height: 1;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  /* Color derived from nested spans (inline styles and data-highlight text-plan) */
}

/* Ensure nested spans display inline and inherit text properties */
.icon-bar-item.icon-plan-wide .plan-text > span {
  display: inline;
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
}

/* Display icon buttons - blue borders, icon only */
.icon-bar-item.icon-display {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  width: 50px;
  height: 50px;
  min-width: 50px;
  min-height: 50px;
  background: var(--background-dark);
  border: none;
  border-radius: var(--border-radius);
  box-shadow: inset 0 0 0 2px var(--primary-blue), /* Blue border */
              0 2px 6px rgba(0, 0, 0, 0.3); /* Dropdown shadow */
  font-size: 1.25rem;
  font-weight: 600;
  cursor: pointer;
  flex-shrink: 0;
}

.icon-bar-item.icon-display .icon-label {
  font-size: 1.25rem;
  line-height: 1;
  /* Color derived from dynamic class (e.g., text-plan, text-deviation, text-warning) */
}

/* Session button - flexible width spanning right space */
.icon-bar-item.icon-session-wide {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 8px;
  flex: 1; /* Span available space */
  height: 50px;
  min-height: 50px;
  background: var(--background-dark);
  border: none;
  border-radius: var(--border-radius);
  box-shadow: inset 0 0 0 2px var(--primary-blue), /* Blue border */
              0 2px 6px rgba(0, 0, 0, 0.3); /* Dropdown shadow */
  cursor: pointer;
}

.icon-bar-item.icon-session-wide .session-text {
  font-size: var(--font-size-h2); /* 1.25rem - matches plan button */
  font-weight: 600;
  line-height: 1;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.icon-bar-item.icon-session-wide .session-text .session-number {
  /* Color derived from dynamic class (e.g., text-plan, text-deviation, text-warning) */
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
}

/* Expand button - gray border, aligned right */
.icon-bar-expand {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: auto;
  padding: 0;
  width: 50px;
  height: 50px;
  min-width: 50px;
  min-height: 50px;
  background: var(--background-dark);
  border: none;
  border-radius: var(--border-radius);
  box-shadow: inset 0 0 0 1px var(--on-surface-disabled), /* Gray border like chevrons */
              0 2px 6px rgba(0, 0, 0, 0.3); /* Dropdown shadow */
  color: #ffffff; /* White arrow */
  cursor: pointer;
  flex-shrink: 0;
}

/* Responsive: stack icon bar items on very narrow screens */
@media (max-width: 480px) {
  .icon-bar {
    flex-wrap: wrap;
  }

  .icon-bar-item {
    flex: 1 1 calc(50% - 4px);
    min-width: 120px;
  }

  .icon-bar-expand {
    flex: 0 0 100%;
    margin-left: 0;
  }
}