/* ==========================================================================
   ACTIVE EXERCISE CARD - MAIN ENTRY POINT

   CEMENT: Central workout interface with timer and action controls
   - 100px exercise selector height exception (vs 50px standard)
   - Stack layout with 16px rhythm (var(--space-m))
   - Local spacing tokens for precise state-specific adjustments
   - Component imports establish clean dependency hierarchy

   Architecture: Component-based with modular file structure
   Component Structure:
   â”œâ”€â”€ .header.css - Exercise title and current session info
   â”œâ”€â”€ .selector.summary.css - 4-line closed state (100px height)
   â”œâ”€â”€ .selector.dropdown.css - 2-line open state items (50px height)
   â”œâ”€â”€ .selector.muting.css - Bidirectional muting across selector groups
   â”œâ”€â”€ .inputs.css - Weight and reps input controls
   â”œâ”€â”€ .fuel-gauge.css - Progress indicator positioning
   â”œâ”€â”€ .action-area.css - Prompts, buttons, and timer container
   â”œâ”€â”€ .state-inactive.css - "Begin Exercise" prompt state
   â”œâ”€â”€ .state-active.css - "Resting For" timer state
   â””â”€â”€ .animations.css - Glow and interaction effects

   Dependencies:
   Global: _card-headers.css, _card-foundations.css, _action-button-groups.css
   Global: _variables.css (space-m, control-height, font sizes, colors)
   Local: Component CSS files (header, selector, inputs, fuel-gauge, etc.)

   Used by: Main workout interface for active exercise card display
   ========================================================================== */

/* Global dependencies */
@import url("../../styles/components/_card-headers.css");
@import url("../../styles/components/_card-foundations.css");
@import url("../../styles/components/_action-button-groups.css");

/* Normal mode component files */
@import url("./active-exercise-card.header.css");
@import url("./active-exercise-card.selector.summary.css");
@import url("./active-exercise-card.selector.dropdown.css");
@import url("./active-exercise-card.selector.muting.css");
@import url("./active-exercise-card.inputs.css");
@import url("./active-exercise-card.fuel-gauge.css");
@import url("./active-exercise-card.action-area.css");
@import url("./active-exercise-card.state-inactive.css");
@import url("./active-exercise-card.state-active.css");
@import url("./active-exercise-card.animations.css");

/* === LOCAL TOKENS === */
/* Component-specific measurements that differ from global defaults */
#active-card-container {
  /* Selector: 100px exception (global default: 50px) */
  --selector-height: 100px;
  --selector-padding-v: 20px;
  
  /* Header: ðŸ”’ TITANIUM-CEMENTED for 16/7/7 rhythm */
  --header-line2-height: 1;        /* Consistent line-height for alignment */

  /* Fuel gauge: Local positioning */
  --fuel-gauge-top: 16px;
  --fuel-gauge-bottom: 3px;

  /* Slack spacing: Visual breathing room */
  --slack-spacing: 23px;           /* Space before action buttons */
  --upper-slack-spacing: 17px;     /* Space below input selectors to achieve 22px visual (compensates for line-height 1.2) */
  --lower-slack-spacing: 19px;     /* Space before action buttons to achieve 23px visual (compensates for line-height 1.2) */

  /* Dual-mode slack spacing: Tighter spacing for dual-mode layout - adjusted for 4.5rem timer */
  --dual-upper-slack-spacing: 12px; /* Space below input selectors to achieve 17px visual (compensates for line-height 1.2 + font metrics) */
  --dual-lower-slack-spacing: 14px; /* Space before action buttons to achieve 18px visual (compensates for line-height 1.2 - font metrics) */

  /* States: Inactive/active spacing with spacer divs */
  --inactive-slack-top: 14px;      /* ðŸ”’ CEMENT: Static slack prevents card height shift */
  --inactive-slack-bottom: 3px;    /* ðŸ”’ CEMENT: 6px total compensates active vs inactive (491px vs 485px) */
  --active-slack-top: 8px;         /* ðŸ”’ CEMENT: Achieves 16px visual above Resting For */
  --active-slack-bottom: 0px;

  /* Timer: Display adjustments */
  --active-timer-line-height: 0.7; /* Large text requirement */

  /* ðŸ”’ CEMENT: Dual-mode spacing tokens - adjusted for 4.5rem timer height */
  /* These tokens compensate for font metrics and line-height to achieve precise visual spacing */
  --dual-timer-font-size: 4.5rem;              /* Dual-mode timer size (down from 5.0rem for 360px viewport) */
  --dual-resting-margin-top: 0px;              /* "Resting For:" to inputs above (16px visual) */
  --dual-grid-margin-top: 12px;                /* "Resting For:" to dual grid below (17px visual) */
  --dual-inactive-margin-top: 11px;            /* Inactive "Begin Exercise" top (16px visual) */
  --dual-inactive-margin-bottom: 2px;          /* Inactive "Begin Exercise" bottom (17px visual) */
  --dual-logset-transform-y: 1px;              /* "Log Set" button alignment (18px from "Resting For:") */

  /* Fine-tuning tokens */
  --youtube-overlay-spacing: 7px;
}

/* === CARD FOUNDATION === */
/* CEMENT: This exact padding achieves 16px visual margins
   11px top compensates for Roboto ascender at 1.25rem */
#active-card-container .card-content-container {
  padding: 11px 14px 14px 14px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* === STACK LAYOUT === */
/* Primary layout mechanism - 16px rhythm throughout */
#active-card-container .stack {
  display: flex;
  flex-direction: column;
  gap: var(--space-m); /* Global: 16px */
}

/* CEMENT: Header/selector uses manual spacing for precision */
#active-card-container .header-and-selector-group.stack {
  gap: 0; /* Controlled in .header.css */
}

/* Dynamic gap support */
#active-card-container .stack[style*="--stack-space"] {
  gap: var(--stack-space);
}

/* === SPECIAL STATES === */
/* Waiting message - uses global patterns */
.waiting-card-message {
  color: var(--on-surface-medium);
  text-align: center;
  font-style: italic;
  padding: var(--space-xl) 0;
  margin: 0;
}

/* Rest day - uses global patterns */
.rest-day-container {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.rest-day-text {
  font-size: var(--font-size-h2);
  font-weight: 600;
  color: var(--on-surface-medium);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}