/* ============================================================================
   MINUTES REMAINING FEATURE - BACKUP FOR RESTORATION
   Created: 2025-09-30

   This file contains all code related to the "Minutes Remaining" with
   estimated completion time feature that was removed from the active
   exercise card.

   RESTORATION INSTRUCTIONS:
   To restore this feature, follow these steps:

   1. In active-exercise-card.templates.workoutCard.js:
      - Lines 57-61 and 106-109: Import/calculate these values at top of
        each mode section
      - Lines 94-98 (dual-mode): Replace the "minutes-remaining-line" div
      - Lines 139-143 (normal mode): Replace the "minutes-remaining-line" div

   2. In active-exercise-card.header.css:
      - Add back the .minutes-remaining-line styles (see CSS section below)

   3. Ensure spacing adjustments are made:
      - Normal mode: margin-top: var(--upper-slack-spacing) before minutes line
      - Dual mode: Same spacing
      - Action area: margin-top: var(--lower-slack-spacing) after minutes line

   ============================================================================ */

/* ============================================================================
   JAVASCRIPT CODE - active-exercise-card.templates.workoutCard.js
   ============================================================================ */

// --- DUAL MODE SECTION (lines 55-103) ---
// At top of dual-mode section, calculate these values:

const remaining = appState.session.workoutTimeRemaining;
const durationUnit = pluralize(remaining, "Minute", "Minutes");
const durationText = `${remaining} ${durationUnit} Remaining`;
const completionTime = calculateCompletionTime(remaining);

// Replace lines 94-98 with this HTML:
// (This goes after the input-group div and before the card-action-area div)

`${isDualModeResting ?
  `` :
  `<div class="minutes-remaining-line dual-mode-inactive-slack" style="margin-top: var(--upper-slack-spacing);">
    <span class="card-header-dynamic-text ${appState.session.currentSessionColorClass}">${durationText}</span>
    <span class="card-header-dynamic-text ${appState.session.currentSessionColorClass}">${completionTime}</span>
  </div>`
}`

// The action area div should have conditional spacing:
// style="margin-top: ${isDualModeResting ? 'var(--upper-slack-spacing)' : 'var(--lower-slack-spacing)'};"


// --- NORMAL MODE SECTION (lines 104-149) ---
// At top of normal mode section, calculate these values:

const remaining = appState.session.workoutTimeRemaining;
const durationUnit = pluralize(remaining, "Minute", "Minutes");
const durationText = `${remaining} ${durationUnit} Remaining`;
const completionTime = calculateCompletionTime(remaining);

// Replace lines 139-143 with this HTML:
// (This goes after the input-group div and conditionally shows either
//  "Resting For:" label or the minutes-remaining-line)

`${appState.rest.normal.type !== "none" ?
  `<div class="resting-for-label" style="margin-top: 11px;">
    <p class="resting-label-text">Resting For:</p>
  </div>` :
  `<div class="minutes-remaining-line" style="margin-top: var(--upper-slack-spacing);">
    <span class="card-header-dynamic-text ${appState.session.currentSessionColorClass}">${durationText}</span>
    <span class="card-header-dynamic-text ${appState.session.currentSessionColorClass}">${completionTime}</span>
  </div>`
}`

// The action area div should have conditional spacing:
// style="margin-top: ${appState.rest.normal.type !== "none" ? '13px' : 'var(--lower-slack-spacing)'};"


/* ============================================================================
   CSS CODE - active-exercise-card.header.css
   ============================================================================ */

/* Add this section after the existing header styles: */

/* === MINUTES REMAINING LINE === */
/* Horizontal layout with two dynamic text elements */
.minutes-remaining-line {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: var(--space-m);
  margin: 0;
  padding: 0;
  min-width: 0;
}

/* Dual-mode specific spacing adjustment */
.minutes-remaining-line.dual-mode-inactive-slack {
  /* Additional spacing adjustments if needed for dual-mode */
}

/* The .card-header-dynamic-text styles should already exist in the file */
/* Ensure these are present: */
/*
#active-card-container .card-header-dynamic-text {
  font-size: 1.25rem;
  font-weight: 600;
  line-height: 1;
  margin: 0;
  padding: 0;
  text-shadow: 0 3px 8px rgba(0, 0, 0, 1.0);
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
*/

/* ============================================================================
   NOTES
   ============================================================================ */

/*
SPACING TOKENS USED:
- var(--upper-slack-spacing): Spacing before the minutes-remaining-line
- var(--lower-slack-spacing): Spacing after the minutes-remaining-line (before action area)

COLOR CLASSES USED:
- appState.session.currentSessionColorClass: Applied to both text spans
  Values can be: text-plan, text-deviation, text-warning

DEPENDENCIES:
- pluralize() function from utils
- calculateCompletionTime() function from utils
- appState.session.workoutTimeRemaining
- appState.session.currentSessionColorClass

LAYOUT BEHAVIOR:
- Shows when NOT resting (in normal mode)
- Shows when NOT dual-mode resting (in dual mode)
- Hidden when resting, replaced by "Resting For:" label
- Two-column layout: duration text (left) and completion time (right)
- Both text elements truncate with ellipsis if needed
*/
