Will’s 3‑2‑1 — Project_Notes_v5.1.6
=====================================

CEMENTED (Project Bible, unchanged)
- Render strictly from appState. Event → Update State → Re-render.
- Rhythm: 16px inset; 7px header→selector; 16px between major groups.
- Current Exercise selector is exactly 100px tall.
- Adherence color logic stays robust (no white fallback).
- Tokenized layout only (no ad‑hoc pixel nudges, no negative padding, no !important, no sub‑1 line-height).
- Any change must be delivered as the **full file** (unzipped), not snippets.

Scope we’re working in
- Active Exercise Card (inactive + active states) and surrounding components.
- Key files of record:
  • src/features/active-exercise-card/active-exercise-card.style.css
  • src/features/active-exercise-card/active-exercise-card.templates.actionArea.js
  • src/features/active-exercise-card/active-exercise-card.templates.workoutCard.js
  • src/styles/base/_variables.css
  • src/styles/components/_fuel-gauge.css

What’s good (locked in)
- Current Exercise header, real-time clock, and “# Minutes Remaining” are unified and pixel-perfect using tokens.
- Input label text (“Weight (lbs)”, “Reps (Target: 10)”) is centered over its respective selector with 7px/7px spacing (tokenized).
- Fuel Gauge restored, animations present. Width aligns to 16px card inset. Height is tokenized at 50px.
- No auto card-sizing logic active in the action area (verified earlier).

Current tokens to keep
(These live in :root of _variables.css. Values may be tuned, but the tokens must remain.)
- --space-m: 16px  (stack rhythm via .stack gap)
- --fuel-gauge-height: 50px
- Fuel gauge anchor spacing (below lives between anchor and action area):
  • --anchor-gap-top: 9px   (compensates selector→gauge from 7px → 16px when needed)
  • --anchor-gap-bottom: 3px (compensates gauge→text 13px → 16px)
- Prompt / resting / timer cap-fix tokens:
  • --cap-fix-action-prompt-top: -3px
  • --cap-fix-action-prompt-bottom: 4px        (prompt→buttons reads 12px; +4 → 16px)
  • --cap-fix-resting-label-top: -3px
  • --cap-fix-resting-label-bottom: 0px
  • --cap-fix-resting-wrapper-top: -3px
  • --cap-fix-resting-wrapper-bottom: -4px     (wrapper control retained; can be 0 if not needed)
  • --cap-fix-timer-top: 0px
  • --cap-fix-timer-bottom: 0px
- Prompt spacers (explicit):
  • --action-prompt-spacer-top: 0px
  • --action-prompt-spacer-bottom: 0px

Where we left off — exact measurements to fix
(Everything not listed here is reading correctly.)

Inactive (no timer)
- Fuel Gauge → “Begin Exercise – Log Results”: **13px** (target 16px)
- “Begin Exercise – Log Results” → Log Set: **12px** (target 16px)

Active (timer)
- Fuel Gauge → “Resting For:”: **13px** (target 16px)
- “Resting For:” → Timer: **31px** (target 16px)
- Timer → “Skip Rest”: **27px** (target 16px)

Notes/hypotheses
- The remaining short gaps (13px/12px) indicate top/bottom offsets not fully neutralized by tokens for that state. Use tokens, not structural hacks.
- The large active gaps (31px/27px) suggest additive bottom margins or inner spacers; ensure `.timer-display` margins are 0 and the parent `.stack` controls spacing (gap: 16px). Verify no duplicate `.timer-display` rules reintroduce margins.
- Ensure the card content wrapper that contains selectors → fuel gauge → action area is either a .stack or the gauge anchor sets margins via tokens (we currently target the anchor directly).

Concrete next steps (token-first)
1) Confirm `_variables.css` includes the tokens above with the listed values.
2) In `active-exercise-card.style.css` (high specificity only):
   - Ensure:
     #active-card-container #card-action-area .action-prompt-text {
       margin-top: var(--cap-fix-action-prompt-top, -3px);
       margin-bottom: var(--cap-fix-action-prompt-bottom, 4px);
     }
     #active-card-container #card-action-area .resting-label {
       margin-top: var(--cap-fix-resting-label-top, -3px);
       margin-bottom: var(--cap-fix-resting-label-bottom, 0px);
     }
     #active-card-container #card-action-area .timer-display {
       margin: 0;
       line-height: var(--lh-normal);
       margin-top: var(--cap-fix-timer-top, 0px);
       margin-bottom: var(--cap-fix-timer-bottom, 0px);
     }
     #active-card-container #card-action-area .action-button-group { margin: 0; padding-top: 0; }
     #active-card-container #card-action-area .timer-container { margin: 0; padding: 0; }
   - Fuel gauge anchor spacing rule (scoped):
     #active-card-container #card-anchor-area {
       margin-top: var(--anchor-gap-top, 9px);
       margin-bottom: var(--anchor-gap-bottom, 3px);
     }
3) Tune tokens only to land each 16px, in this order:
   a) Inactive: raise gauge→prompt using --anchor-gap-bottom (3px → test 4px if still 15px; otherwise 3px).
   b) Inactive: raise prompt→Log Set using --cap-fix-action-prompt-bottom (4px ±1).
   c) Active: raise gauge→resting using --anchor-gap-bottom (same anchor governs both states).
   d) Active: shrink Resting→Timer to 16px: keep --cap-fix-resting-label-bottom at 0; verify no spacer height remains; if still large, check for duplicated `.timer-display` or leftover `.action-timer-spacer-bottom`.
   e) Active: shrink Timer→Skip Rest to 16px: ensure `.timer-display` margins are 0 and button group has no margins; if still large, there’s likely a duplicated rule later in CSS—remove it.

Delivery rules to keep (important)
- Always send **full files**, unzipped, as downloadable artifacts (no inline code).
- If links expire, regenerate the files and re-send.
- Never change the 16/7/7 rhythm or the 100px selector height.
- If optically aligning large type (timer), use **cap-fix tokens** only; do not change line-height below 1.0 and do not use negative padding.

Git hygiene (quick)
- Prefer PR from `active-exercise-card-unify` → `main`.
- If merging locally: switch to `main`, pull, then merge `active-exercise-card-unify`, resolve (prefer our AEC changes), commit, push.
- If a merge editor appears: Accept Current for our AEC files; Complete Merge; Commit.

End of notes.
